<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta description="This Web app decides what restaurant to eat at for you, based on an entered location">
    <meta name="viewport" content="width=device-width, initial-scale=0.86, maximum-scale=1, minimum-scale=0.86">
    <title>It's Cook-able</title>

    <link href="https://unpkg.com/tailwindcss@^1.0/dist/tailwind.min.css" rel="stylesheet">
    <link
        href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;700&family=Quicksand:wght@300;400&display=swap"
        rel="stylesheet">
    <link href="index.css" rel="stylesheet" type="text/css" />
</head>

<body class="is-secondary-font categories-page">
    <div class="main-container min-h-screen">

        <h1 class="text-5xl font-bold is-primary-font">Ingredients</h1>
        <p class="mb-6 mt-0 text-gray-800">Select Ingredient</p>

        <div class="categories flex overflow-y-auto mb-10 py-2">

        </div>

        <a href="/recipes.html?ingredient=random" class="px-4 py-4 bg-orange-600 rounded-full uppercase w-full text-white text-center block">
            Select Random Ingredient
        </a>

    </div>

    <script>
        const API_BASE_URL = 'https://www.themealdb.com/api/json/v1/1/';

        document.addEventListener('DOMContentLoaded', init);


        function init() {
            getCategories();
        }

        function getCategories() {
            window.fetch(`${API_BASE_URL}categories.php`)
                .then(function (response) {
                    return response.json();
                }).then(function (data) {
                    displayCategories(data.categories);
                });
        }

        function displayCategories(categories) {
            var categoriesEl = document.querySelector('.categories');

            categories.forEach(function ({
                strCategory,
                strCategoryDescription,
                strCategoryThumb
            }) {
                categoriesEl.insertAdjacentHTML('beforeend', `
                    <a href="/recipes.html?ingredient=${strCategory.toLowerCase()}" style="background-image: url(${strCategoryThumb});" class="category-card block">
                        <h1 class="text-5xl text-orange-600 font-bold is-primary-font">${strCategory}</h1>
                        <p>${strCategoryDescription.substring(0,100)}...</p>
                    </a>

                `);
            });
        }
    </script>

</body>

</html>